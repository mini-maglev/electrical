Version 4.1
SHEET 1 2420 1588
WIRE 32 -560 0 -560
WIRE 272 -560 240 -560
WIRE 528 -560 496 -560
WIRE 0 -480 0 -560
WIRE 240 -480 240 -560
WIRE 496 -480 496 -560
WIRE 1168 -256 1168 -384
WIRE 1168 -256 368 -256
WIRE 1968 -256 1168 -256
WIRE 368 -192 368 -256
WIRE 1168 -192 1168 -256
WIRE 1968 -192 1968 -256
WIRE 192 -112 144 -112
WIRE 320 -112 272 -112
WIRE 992 -112 944 -112
WIRE 1120 -112 1072 -112
WIRE 1792 -112 1744 -112
WIRE 1920 -112 1872 -112
WIRE 368 -48 368 -96
WIRE 480 -48 368 -48
WIRE 1168 -48 1168 -96
WIRE 1280 -48 1168 -48
WIRE 1968 -48 1968 -96
WIRE 2080 -48 1968 -48
WIRE 368 0 368 -48
WIRE 1168 0 1168 -48
WIRE 1968 0 1968 -48
WIRE 192 80 144 80
WIRE 320 80 272 80
WIRE 992 80 944 80
WIRE 1120 80 1072 80
WIRE 1792 80 1744 80
WIRE 1920 80 1872 80
WIRE 480 224 480 -48
WIRE 544 224 480 224
WIRE 1280 224 1280 -48
WIRE 1344 224 1280 224
WIRE 2080 224 2080 -48
WIRE 2144 224 2080 224
WIRE 368 304 368 96
WIRE 1168 304 1168 96
WIRE 1168 304 368 304
WIRE 1968 304 1968 96
WIRE 1968 304 1168 304
WIRE 1168 384 1168 304
WIRE 1232 384 1168 384
WIRE 1168 400 1168 384
WIRE 1232 416 1232 384
WIRE 1280 416 1232 416
WIRE 1408 432 1344 432
WIRE 1280 448 1232 448
WIRE 1168 496 1168 480
WIRE 1232 496 1232 448
WIRE 1232 496 1168 496
WIRE 1168 544 1168 496
WIRE 480 832 432 832
WIRE 624 832 560 832
WIRE 784 912 752 912
WIRE 240 928 240 864
WIRE 304 928 240 928
WIRE 432 928 432 832
WIRE 432 928 384 928
WIRE 784 928 784 912
WIRE 240 960 240 928
WIRE 432 976 432 928
WIRE 480 976 432 976
WIRE 752 976 752 912
WIRE 624 992 624 832
WIRE 624 992 544 992
WIRE 720 992 624 992
WIRE 480 1008 432 1008
WIRE 832 1008 784 1008
WIRE 896 1008 832 1008
WIRE 720 1024 688 1024
WIRE 1616 1040 1616 992
WIRE 1616 1040 1424 1040
WIRE 512 1056 512 1024
WIRE 240 1072 240 1040
WIRE 304 1072 240 1072
WIRE 432 1072 432 1008
WIRE 432 1072 384 1072
WIRE 1488 1088 1344 1088
WIRE 1616 1088 1616 1040
WIRE 240 1136 240 1072
WIRE 688 1136 688 1024
WIRE 832 1136 832 1008
WIRE 832 1136 688 1136
WIRE 1424 1152 1424 1040
WIRE 1488 1168 1488 1088
WIRE 1488 1168 1456 1168
WIRE 432 1184 432 1072
WIRE 480 1184 432 1184
WIRE 592 1184 560 1184
WIRE 1344 1184 1344 1088
WIRE 1344 1184 1296 1184
WIRE 1392 1184 1344 1184
WIRE 1616 1200 1616 1168
WIRE 1616 1200 1456 1200
WIRE 1616 1232 1616 1200
WIRE 1424 1328 1424 1216
WIRE 1616 1328 1616 1312
WIRE 1616 1328 1424 1328
WIRE 1616 1360 1616 1328
FLAG 144 -112 PHASE_A_HIGH
IOPIN 144 -112 In
FLAG 144 80 PHASE_A_LOW
IOPIN 144 80 In
FLAG 544 224 STATOR_PHASE_A
IOPIN 544 224 Out
FLAG 944 -112 PHASE_B_HIGH
IOPIN 944 -112 In
FLAG 944 80 PHASE_B_LOW
IOPIN 944 80 In
FLAG 1344 224 STATOR_PHASE_B
IOPIN 1344 224 Out
FLAG 1744 -112 PHASE_C_HIGH
IOPIN 1744 -112 In
FLAG 1744 80 PHASE_C_LOW
IOPIN 1744 80 In
FLAG 2144 224 STATOR_PHASE_C
IOPIN 2144 224 Out
FLAG 1168 544 0
FLAG 240 -400 0
FLAG 496 -400 0
FLAG 0 -400 0
FLAG 32 -560 3V3
IOPIN 32 -560 Out
FLAG 272 -560 110V
IOPIN 272 -560 Out
FLAG 1168 -384 110V
IOPIN 1168 -384 In
FLAG 592 1184 V_ref
IOPIN 592 1184 In
FLAG 896 1008 MCU_PIN_A1
IOPIN 896 1008 Out
FLAG 784 928 0
FLAG 512 1056 0
FLAG 752 1040 3V3
IOPIN 752 1040 In
FLAG 512 960 3V3
IOPIN 512 960 In
FLAG 240 864 STATOR_PHASE_A
IOPIN 240 864 In
FLAG 240 1136 STATOR_PHASE_A_LOAD
IOPIN 240 1136 Out
FLAG 1616 992 3V3
IOPIN 1616 992 In
FLAG 1616 1360 0
FLAG 1296 1184 V_ref
IOPIN 1296 1184 Out
FLAG 528 -560 5V
IOPIN 528 -560 Out
SYMBOL nmos 320 -192 R0
SYMATTR InstName M1
SYMBOL nmos 320 0 R0
SYMATTR InstName M2
SYMBOL res 288 -128 R90
WINDOW 0 -27 167 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1_small_gate_resistor_?
SYMBOL res 288 64 R90
WINDOW 0 -19 149 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2_small_gate_resistor_?
SYMBOL voltage 240 -496 R0
SYMATTR InstName INVERTER_SUPPLY
SYMBOL voltage 496 -496 R0
SYMATTR InstName CURRENT_SENSE_AMPLIFIER_SUPPLY_?
SYMBOL voltage 0 -496 R0
SYMATTR InstName MCU_SUPPLY
SYMBOL nmos 1120 -192 R0
SYMATTR InstName M3
SYMBOL nmos 1120 0 R0
SYMATTR InstName M4
SYMBOL res 1088 -128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMBOL res 1088 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMBOL nmos 1920 -192 R0
SYMATTR InstName M5
SYMBOL nmos 1920 0 R0
SYMATTR InstName M6
SYMBOL res 1888 -128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMBOL res 1888 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMBOL res 1184 496 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R_SENSE_LOW_SIDE
SYMBOL OpAmps\\UniversalOpAmp 1312 432 M180
SYMATTR InstName AMP3_cheap
SYMBOL OpAmps\\UniversalOpAmp 512 992 R0
SYMATTR InstName U1
SYMBOL res 400 912 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMBOL res 576 816 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 50R
SYMBOL res 400 1056 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMBOL res 576 1168 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 50R
SYMBOL OpAmps\\UniversalOpAmp 752 1008 M180
SYMATTR InstName U2
SYMBOL res 224 944 R0
WINDOW 0 -105 33 Left 2
WINDOW 3 -70 69 Left 2
SYMATTR InstName R_shunt
SYMATTR Value 800µ
SYMBOL res 1600 1072 R0
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL res 1600 1216 R0
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL OpAmps\\UniversalOpAmp 1424 1184 M0
SYMATTR InstName U3
TEXT 368 648 Left 2 ;Inline current sensing\n(Packaged in Texas Instruments INA750B)
TEXT 1192 856 Left 2 ;Reference voltage for bidirectional\ncurrent sensing (half-scale)
TEXT 880 1064 Left 2 ;Output is 40mV/A
TEXT -32 -688 Left 2 ;Q: What benefit to powering current sense amp\nat 5V instead of 3V3?
